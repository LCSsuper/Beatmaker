(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,n){e.exports=n(232)},172:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(6),o=n.n(c),r=n(101),l=n(103),s=n.n(l),d=(n(172),n(34)),u=n(20),m=n(12),f=n(13),v=[{id:1,color:"#60d394"},{id:2,color:"#d36060"},{id:3,color:"#c060d3"},{id:4,color:"#d3d160"},{id:5,color:"#6860d3"},{id:6,color:"#60b2d3"}],E=function(e){var t=e.id,n=e.sounds,a=e.active,c=e.toggleSound,o=e.style;return i.a.createElement("div",{className:"tick ".concat(a?"active":""),style:o},v.map(function(e){return i.a.createElement("div",{key:e.id,className:"sound-in-tick",style:{background:e.color,opacity:n.includes(e.id)?"1":"0.2"},onClick:function(){return c(e.id,t)}})}))},p=n(111),b=(n(231),n(106)),k=n(107),h=n(112),O=n(108),w=n(113),g=n(109),j=n.n(g),y=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(h.a)(this,Object(O.a)(t).call(this,e))).state={},n}return Object(w.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.$el=o.a.findDOMNode(this),this.$waveform=this.$el.querySelector(".wave"),this.wavesurfer=j.a.create({container:this.$waveform,waveColor:"gray",progressColor:"black",height:"80",responsive:!0}),this.wavesurfer.load(this.props.src),this.wavesurfer.seekTo(this.props.startAt),this.wavesurfer.on("seek",this.props.onSeek)}},{key:"render",value:function(){return i.a.createElement("div",{className:"waveform"},i.a.createElement("div",{className:"wave"}))}}]),t}(i.a.Component),C=[{id:1,color:"#60d394"},{id:2,color:"#d36060"},{id:3,color:"#c060d3"},{id:4,color:"#d3d160"},{id:5,color:"#6860d3"},{id:6,color:"#60b2d3"}],S=function(e){var t=e.id,n=e.file,a=e.startAt,c=e.volume,o=e.onPlay,r=e.setTime,l=e.setVolume;return i.a.createElement("div",{className:"sound-container",style:{background:C.find(function(e){return e.id===t}).color}},i.a.createElement("div",null,i.a.createElement("div",{onClick:function(){return o(t)},className:"button"},i.a.createElement(m.a,{icon:f.c}))),i.a.createElement("div",{className:"wave"},i.a.createElement(y,{src:n,onSeek:function(e){return r(t,e)},startAt:a})),i.a.createElement("div",{className:"volume"},i.a.createElement(p.a,{vertical:!0,min:0,value:100*c,max:100,onChange:function(e){return l(t,e/100)}})))},N=n(110),A=function(e){var t=e.file,n=e.startAt,a=e.volume,i=new N.Howl({src:[t]}),c=i.duration()*n;i.seek(c),i.volume(a),i.play()},x=function(){var e=Object(a.useState)(144),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(8),r=Object(u.a)(o,2),l=r[0],s=r[1],v=Object(a.useState)(0),p=Object(u.a)(v,2),b=p[0],k=p[1],h=Object(a.useState)([]),O=Object(u.a)(h,2),w=O[0],g=O[1],j=Object(a.useState)(0),y=Object(u.a)(j,2),C=y[0],N=y[1],x=Object(a.useState)([]),I=Object(u.a)(x,2),T=I[0],B=I[1],D=Object(a.useState)(!1),J=Object(u.a)(D,2),R=J[0],P=J[1],$=function(){if(R){var e=b+1;k(e===4*l?0:e)}},M=function(e){n+e!==181&&n+e!==59&&c(n+e)},U=function(e){l+e!==17&&l+e!==3&&s(l+e)},F=function(){w.length&&w[b].sounds.forEach(function(e){var t=T.find(function(t){return t.id===e});A(t)})},K=function(e,t){if(w[t].sounds.includes(e)){var n=w[t].sounds.indexOf(e);w[t].sounds.splice(n,1),g(Object(d.a)(w))}else w[t].sounds.push(e),g(Object(d.a)(w))},V=function(e,t){var n=T.findIndex(function(t){return t.id===e});T[n].startAt=t,B(Object(d.a)(T))},q=function(e,t){var n=T.findIndex(function(t){return t.id===e});T[n].volume=t,B(Object(d.a)(T))};return Object(a.useEffect)(function(){for(var e=0;e<4*l;e++)w.push({id:e,sounds:[]});g(w),B([{id:1,file:"sounds/kick.wav",startAt:0,volume:1},{id:2,file:"sounds/hihat.wav",startAt:0,volume:1},{id:3,file:"sounds/snare.wav",startAt:0,volume:1},{id:4,file:"sounds/clap.wav",startAt:0,volume:1},{id:5,file:"sounds/perc.wav",startAt:0,volume:1},{id:6,file:"sounds/808.wav",startAt:0,volume:1}])},[]),Object(a.useEffect)(function(){R&&F(),N(setTimeout($,6e4/(4*n)))},[b]),Object(a.useEffect)(function(){var e=w.length;if(e<4*l)for(var t=0;t<4;t++)w.push({id:e+t,sounds:[]});else e>4*l&&w.splice(-4,4);g(Object(d.a)(w))},[l]),Object(a.useEffect)(function(){R?(F(),N(setTimeout($,6e4/(4*n)))):clearTimeout(C)},[R]),i.a.createElement("div",{id:"app",onKeyDown:function(e){32===e.keyCode&&P(!R)},tabIndex:"0"},i.a.createElement("div",{id:"header"},i.a.createElement("div",{id:"playback"},i.a.createElement("div",{id:"play-pause",className:R?"playing":"",onClick:function(){return P(!R)}},R?i.a.createElement(m.a,{icon:f.b}):i.a.createElement(m.a,{icon:f.c})),i.a.createElement("div",{onClick:function(){P(!1),k(0)}},i.a.createElement(m.a,{icon:f.f}))),i.a.createElement("div",{id:"settings"},i.a.createElement("div",null,i.a.createElement("div",{className:"counter"},n," BPM"),!R&&i.a.createElement("div",null,i.a.createElement("div",{onClick:function(){return M(1)}},i.a.createElement(m.a,{icon:f.e})),i.a.createElement("div",{onClick:function(){return M(-1)}},i.a.createElement(m.a,{icon:f.d})))),i.a.createElement("div",null,i.a.createElement("div",{className:"counter"},l," TICKS"),!R&&i.a.createElement("div",null,i.a.createElement("div",{onClick:function(){return U(1)}},i.a.createElement(m.a,{icon:f.e})),i.a.createElement("div",{onClick:function(){return U(-1)}},i.a.createElement(m.a,{icon:f.d}))))),i.a.createElement("div",{id:"download"},i.a.createElement("div",null,i.a.createElement("input",{type:"file",name:"file",onChange:function(e){if(e.target.files[0]){var t=new FileReader;t.onload=function(e){var t=JSON.parse(e.target.result);"bpm"in t&&"sounds"in t&&"tickCount"in t&&"ticks"in t&&(c(t.bpm),g(t.ticks),B(t.sounds),s(t.tickCount))},t.readAsText(e.target.files[0])}}}),i.a.createElement(m.a,{icon:f.g})),i.a.createElement("div",{onClick:function(){!function(e){if(window.navigator&&window.navigator.msSaveOrOpenBlob){var t=new Blob([decodeURIComponent(encodeURI(JSON.stringify(e)))],{type:"application/json;charset=utf-8;"});navigator.msSaveOrOpenBlob(t,"config.json")}else{var n=document.createElement("a");n.download="config.json",n.href="data:application/json;charset=utf-8;,"+encodeURIComponent(JSON.stringify(e)),n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}({bpm:n,ticks:w,sounds:T,tickCount:l})}},i.a.createElement(m.a,{icon:f.a})))),i.a.createElement("div",{id:"tabs"},i.a.createElement("div",{id:"ticks"},w.map(function(e){var t=34*w.length+15*l,n=w.length/2===e.id&&t>window.innerWidth;return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement("br",null),i.a.createElement(E,{key:e.id,id:e.id,sounds:e.sounds,active:b===e.id,toggleSound:K,style:{marginRight:e.id%4===3?"15px":"2px"}}))}))),i.a.createElement("div",{id:"pads"},T.map(function(e){return i.a.createElement(S,{key:e.id,id:e.id,volume:e.volume,onPlay:function(){return A(e)},file:e.file,setTime:V,setVolume:q,startAt:e.startAt})})))};o.a.render(i.a.createElement(r.DragDropContextProvider,{backend:s.a},i.a.createElement(x,null)),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.42f34abe.chunk.js.map